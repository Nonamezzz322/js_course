{"version":3,"sources":["location_api.js","dom.js","index.js"],"names":["LocationApi","fetch","then","res","json","ip","your_ip","city","Dom","text","document","getElementsByTagName","preloader","createElement","append","style","width","height","background","remove","coordinates","weather","cityName","name","maxTemp","Math","floor","main","temp_max","minTemp","temp_min","temp","longitude","coord","lon","latitude","lat","preasure","pressure","humidity","windSpeed","wind","speed","description","icon","iconSky","id","weathericon","getElementById","src","cityDisplay","innerText","descr","tempDisplay","max","min","prs","hum","wS","loc","dom","input","addEventListener","value","promise","Promise","rej","getMyWeather","setWeather","hidePreloader","getMyIp","getMyLocation","localStorage","setItem"],"mappings":"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","file":"lesson_21.e31bb0bc.map","sourceRoot":"..","sourcesContent":["export default class LocationApi {\r\n\tgetMyIp() {\r\n\t\treturn fetch ('https://api.ipify.org?format=json')\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => res.ip)\r\n\t}\r\n\tgetMyLocation(your_ip) {\r\n\t\treturn fetch('http://api.ipstack.com/'+your_ip+'?access_key=ea06658607226dda76d14f5d1a8f8bef')\r\n\t\t\t.then((res) =>res.json())\r\n\t\t}\r\n\tgetMyWeather(city) {\r\n\t\t\treturn fetch('https://api.openweathermap.org/data/2.5/weather?q='+city+'&appid=3c912d7dc513a632a861c7ad683a49f7')\r\n\t\t\t.then((res) =>res.json())\r\n\t\t}\r\n\t};","export default class Dom {\r\n\tconstructor(){\r\n\t\tthis.text = document.getElementsByTagName('body')[0];\r\n\t\tthis.preloader = document.createElement('div');\r\n\t\tthis.text.append(this.preloader)\t\r\n\t}\r\n\tshowPreloader(){\r\n\t\tthis.preloader.style.width=\"200px\";\r\n\t\tthis.preloader.style.height=\"200px\";\r\n\t\tthis.preloader.style.background=\"url(preloader.svg) no-repeat 50% 50%/cover\"           \r\n\t}\r\n\r\n\thidePreloader(){\r\n\t\tthis.preloader.remove()\t\r\n\t}\r\n\r\n\tsetCoordinates(coordinates) {\r\n\t\t\r\n\r\n\t}\r\n\t\r\n\tsetWeather(weather) {\r\n\t\tlet cityName = weather.name;\r\n\t\tlet maxTemp = Math.floor(weather.main.temp_max - 273,15);\r\n\t\tlet minTemp = Math.floor(weather.main.temp_min - 273,15);\r\n\t\tlet temp = Math.floor(weather.main.temp - 273,15);\r\n\t\tlet longitude = weather.coord.lon;\r\n\t\tlet latitude  = weather.coord.lat;\r\n\t\tlet preasure = weather.main.pressure;\r\n\t\tlet humidity = weather.main.humidity;\r\n\t\tlet windSpeed = weather.wind.speed;\r\n\t\tlet description = weather.weather[0].description;\r\n\t\tlet icon = weather.weather[0].icon;\r\n\t\t\r\n\t\tthis.iconSky = document.createElement('img');\r\n\t\tthis.iconSky.id = 'iconSky';\r\n\t\tthis.weathericon = document.getElementById('weathericon');\r\n\t\tthis.weathericon.append(this.iconSky)\t\r\n\t\ticonSky.src = `http://openweathermap.org/img/w/${icon}.png`;\r\n\r\n\t\tthis.cityDisplay = document.getElementById('city_name');\r\n\t\tthis.cityDisplay.innerText = `${cityName}`;\r\n\r\n\t\tthis.descr = document.getElementById('description');\r\n\t\tthis.descr.innerText = `${description}`;\r\n\r\n\t\tthis.tempDisplay = document.getElementById('temp');\r\n\t\tthis.tempDisplay.innerText = `${temp} ºC`;\r\n\r\n\t\tthis.max = document.getElementById('max');\r\n\t\tthis.max.innerText = `${maxTemp} ºC`;\r\n\r\n\t\tthis.min = document.getElementById('min');\r\n\t\tthis.min.innerText = `${minTemp} ºC`;\r\n\r\n\t\tthis.lat = document.getElementById('latitude');\r\n\t\tthis.lat.innerText = `Lat: ${latitude}`;\r\n\r\n\t\tthis.lon = document.getElementById('longitude');\r\n\t\tthis.lon.innerText = `Lon: ${longitude}`;\r\n\r\n\t\tthis.prs = document.getElementById('pressure');\r\n\t\tthis.prs.innerText = `Pressure: ${preasure}`;\r\n\r\n\t\tthis.hum = document.getElementById('humidity');\r\n\t\tthis.hum.innerText = `Humidity: ${humidity}`;\r\n\r\n\t\tthis.wS = document.getElementById('windSpeed');\r\n\t\tthis.wS.innerText = `Winds: ${windSpeed}`;\r\n\t}\r\n};\r\n","import LocationApi from \"./location_api.js\"\r\nimport Dom from \"./dom.js\"\r\n\r\nlet loc = new LocationApi()\r\nlet dom = new Dom()\r\n\r\nlet input = document.getElementById('input');\r\ninput.addEventListener('change', () => {\r\n\tlet value = input.value;\r\n\tlet promise = new Promise(function(res,rej){\r\n\t\tres(loc.getMyWeather(value))\r\n\t})\r\n\t\t.then(res=>{\r\n\t\t\tdom.setWeather(res)\r\n\t\t\tdom.hidePreloader()\r\n\t\t});\r\n\t\r\n})\r\n\r\n\r\nlet promise = new Promise(function(res,rej){\r\n\tres(loc.getMyIp())\r\n})\r\n\r\n\t.then(ip => loc.getMyLocation(ip))\r\n\t.then(res=>res.city)\r\n\t.then(function(res){\r\n\t\tlocalStorage.setItem('city', res)\r\n\t\treturn loc.getMyWeather(res)\r\n\t})\r\n\t.then(res=>{\r\n\t\tdom.setWeather(res)\r\n\t\tdom.hidePreloader()\r\n\t});\r\n"]}